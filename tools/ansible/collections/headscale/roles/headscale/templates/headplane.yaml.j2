# Headplane Configuration - Generated by Ansible
# https://github.com/tale/headplane

server:
  host: "0.0.0.0"
  port: 3000
  # Base URL for Headplane (must match IdP redirect URI base)
  base_url: "https://{{ headscale_domain }}"
  # 32-character secret for cookie encryption (generated)
  cookie_secret: "{{ headplane_cookie_secret }}"
  # Use secure cookies (HTTPS)
  cookie_secure: true
  # Session duration in seconds (24 hours)
  cookie_max_age: 86400
  # Data directory for Headplane state
  data_path: "/var/lib/headplane"

headscale:
  # URL to reach Headscale API (internal Docker network)
  url: "http://headscale:8080"
  # Path to Headscale config inside Headplane container
  config_path: "/etc/headscale/config.yaml"
  # Strict config validation (false for compatibility)
  config_strict: false

{% if headplane_oidc_enabled | default(false) %}
# OIDC Authentication (Authentik via Google Workspace SSO)
# Redirect URI: https://{{ headscale_domain }}/admin/oidc/callback
oidc:
  issuer: "{{ headplane_oidc_issuer }}"
  client_id: "{{ headplane_oidc_client_id }}"
  client_secret: "{{ headplane_oidc_client_secret }}"
  headscale_api_key: "{{ headplane_api_key }}"
  disable_api_key_login: {{ headplane_disable_api_key_login | default(true) | lower }}
  scope: "openid email profile"
{% endif %}

# Integration settings
integration:
  docker:
    enabled: false
